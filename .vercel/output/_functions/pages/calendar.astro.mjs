import { c as createComponent, r as renderTemplate, m as maybeRenderHead, f as renderComponent } from '../chunks/astro/server_BHQwKeS7.mjs';
import 'kleur/colors';
import 'clsx';
import { $ as $$Layout } from '../chunks/Layout_B_ZMlYiY.mjs';
export { renderers } from '../renderers.mjs';

var __freeze = Object.freeze;
var __defProp = Object.defineProperty;
var __template = (cooked, raw) => __freeze(__defProp(cooked, "raw", { value: __freeze(raw || cooked.slice()) }));
var _a;
const $$Calendly = createComponent(async ($$result, $$props, $$slots) => {
  return renderTemplate(_a || (_a = __template(["", '<section class="py-8 px-4 bg-[#87806B]" id="calendly"> <div class="max-w-[600px] mx-auto"> <h2 class="text-[20px] text-center md:text-[32px] leading-[120%] md:leading-[110%] font-bold text-white mb-4">\nAgend\xE1 tu llamada, vamos a resolver tus dudas y consultas, y ver\n			juntos si esta Formaci\xF3n es para vos.\n</h2> <p class="text-center">\xA1Aprovecha el precio especial de este mes!</p> <!-- Calendly inline widget begin --> <div class="calendly-inline-widget mt-8" data-url="https://calendly.com/dacharryi/consulta-online-formacion-vastu-shastra?hide_gdpr_banner=1&embed_domain=formacionvastushastra.com&embed_type=Inline" style="min-width:320px;height:700px;"> <!-- data-url="https://calendly.com/dacharryi/consulta-online-formacion-vastu-shastra?hide_gdpr_banner=1&embed_domain=formacionvastushastra.com&embed_type=Inline" --> </div> <script type="text/javascript" src="https://assets.calendly.com/assets/external/widget.js" async><\/script> <!-- Calendly inline widget end --> </div> <img class="h-[60px] mt-8 md:h-[60px] mx-auto mb-8" src="/images/vastu-shastra.webp" alt="Ivan Vastu Shastra"> <p class="text-white/80 text-center mt-8 text-[14px] md:text-[16px]">\n\xA9 Formaci\xF3n Vastu Shastra 2025. Todos los derechos reservados.\n</p> <p class="text-white/60 text-[12px] text-center">\nEste sitio no forma parte de Facebook\u2122 o Meta Platforms, Inc. La\n		informaci\xF3n presentada tiene fines educativos y no garantiza resultados\n		espec\xEDficos.\n<!-- Al registrarte, acept\xE1s nuestros\n		[T\xE9rminos y Condiciones] y [Pol\xEDtica de Privacidad]. --> </p> </section> <script>\n	function getCookie(name) {\n		const m = document.cookie.match(\n			new RegExp("(?:^|; )" + encodeURIComponent(name) + "=([^;]*)"),\n		);\n		return m ? decodeURIComponent(m[1]) : "";\n	}\n\n	// Fallback: si no hay cookie, intentamos inferir desde localStorage con la misma l\xF3gica del modal\n	function isQualifiedFallbackFromStorage() {\n		try {\n			const answers = JSON.parse(\n				localStorage.getItem("qf_answers") || "{}",\n			);\n			const ocup = String(answers.ocupacion || "");\n			const comp = String(answers.compromiso || "");\n			const isTarget = ocup === "arquitecta" || ocup === "disenadora";\n			const hasCommitment = comp !== "explorando";\n			return isTarget && hasCommitment;\n		} catch {\n			return false;\n		}\n	}\n\n	function isQualified() {\n		const statusCookie =\n			getCookie("qf_status") || localStorage.getItem("qf_status") || "";\n		if (statusCookie) return statusCookie === "qualified";\n		return isQualifiedFallbackFromStorage();\n	}\n\n	// Crea un ID legible si Calendly no trae UUID (m\xE1x 128 chars)\n	function fallbackEventId() {\n		return (\n			"cal_" +\n			Date.now().toString(36) +\n			"_" +\n			Math.random().toString(36).slice(2, 10)\n		);\n	}\n\n	// Sanitiza a caracteres v\xE1lidos para Meta (recomendado)\n	function sanitizeId(id) {\n		return String(id)\n			.replace(/[^a-zA-Z0-9_\\-:.]/g, "")\n			.slice(0, 128);\n	}\n\n	async function sendMetaSchedule(payload) {\n		try {\n			await fetch("/api/meta-capi", {\n				method: "POST",\n				headers: { "Content-Type": "application/json" },\n				body: JSON.stringify(payload),\n				keepalive: true,\n			});\n		} catch (e) {\n			console.error("Error enviando a Meta CAPI:", e);\n		}\n	}\n\n	console.log("Califica?", isQualified());\n\n	window.addEventListener("message", async function (e) {\n		if (e.origin !== "https://calendly.com") return;\n		if (!e?.data || typeof e.data !== "object") return;\n\n		const evt = e.data.event || "";\n		if (typeof evt !== "string" || !evt.startsWith("calendly.")) return;\n\n		if (evt === "calendly.event_scheduled") {\n			// Extraer UUIDs de Calendly\n			const eventUri = e.data?.payload?.event?.uri || "";\n			const inviteeUri = e.data?.payload?.invitee?.uri || "";\n			const fromEvent = eventUri.split("/").pop() || "";\n			const fromInvitee = inviteeUri.split("/").pop() || "";\n			const rawId = fromInvitee || fromEvent || fallbackEventId();\n			const eventId = sanitizeId(rawId);\n\n			// Datos complementarios\n			const email = localStorage.getItem("lead_email") || "";\n			const phone = localStorage.getItem("lead_phone") || "";\n			const fbp = getCookie("_fbp") || localStorage.getItem("fbp") || "";\n			const fbc = getCookie("_fbc") || localStorage.getItem("fbc") || "";\n\n			// \u{1F447} Enviar SOLO si est\xE1 calificado\n			if (isQualified()) {\n				await sendMetaSchedule({\n					eventName: "Schedule",\n					eventTime: Math.floor(Date.now() / 1000),\n					eventSourceUrl: window.location.href,\n					actionSource: "website",\n					eventId,\n					email,\n					phone,\n					fbp,\n					fbc,\n				});\n			}\n\n			// Redirigir siempre al thankyou (califique o no)\n			window.location.assign("/thankyou");\n		}\n	});\n<\/script>'], ["", '<section class="py-8 px-4 bg-[#87806B]" id="calendly"> <div class="max-w-[600px] mx-auto"> <h2 class="text-[20px] text-center md:text-[32px] leading-[120%] md:leading-[110%] font-bold text-white mb-4">\nAgend\xE1 tu llamada, vamos a resolver tus dudas y consultas, y ver\n			juntos si esta Formaci\xF3n es para vos.\n</h2> <p class="text-center">\xA1Aprovecha el precio especial de este mes!</p> <!-- Calendly inline widget begin --> <div class="calendly-inline-widget mt-8" data-url="https://calendly.com/dacharryi/consulta-online-formacion-vastu-shastra?hide_gdpr_banner=1&embed_domain=formacionvastushastra.com&embed_type=Inline" style="min-width:320px;height:700px;"> <!-- data-url="https://calendly.com/dacharryi/consulta-online-formacion-vastu-shastra?hide_gdpr_banner=1&embed_domain=formacionvastushastra.com&embed_type=Inline" --> </div> <script type="text/javascript" src="https://assets.calendly.com/assets/external/widget.js" async><\/script> <!-- Calendly inline widget end --> </div> <img class="h-[60px] mt-8 md:h-[60px] mx-auto mb-8" src="/images/vastu-shastra.webp" alt="Ivan Vastu Shastra"> <p class="text-white/80 text-center mt-8 text-[14px] md:text-[16px]">\n\xA9 Formaci\xF3n Vastu Shastra 2025. Todos los derechos reservados.\n</p> <p class="text-white/60 text-[12px] text-center">\nEste sitio no forma parte de Facebook\u2122 o Meta Platforms, Inc. La\n		informaci\xF3n presentada tiene fines educativos y no garantiza resultados\n		espec\xEDficos.\n<!-- Al registrarte, acept\xE1s nuestros\n		[T\xE9rminos y Condiciones] y [Pol\xEDtica de Privacidad]. --> </p> </section> <script>\n	function getCookie(name) {\n		const m = document.cookie.match(\n			new RegExp("(?:^|; )" + encodeURIComponent(name) + "=([^;]*)"),\n		);\n		return m ? decodeURIComponent(m[1]) : "";\n	}\n\n	// Fallback: si no hay cookie, intentamos inferir desde localStorage con la misma l\xF3gica del modal\n	function isQualifiedFallbackFromStorage() {\n		try {\n			const answers = JSON.parse(\n				localStorage.getItem("qf_answers") || "{}",\n			);\n			const ocup = String(answers.ocupacion || "");\n			const comp = String(answers.compromiso || "");\n			const isTarget = ocup === "arquitecta" || ocup === "disenadora";\n			const hasCommitment = comp !== "explorando";\n			return isTarget && hasCommitment;\n		} catch {\n			return false;\n		}\n	}\n\n	function isQualified() {\n		const statusCookie =\n			getCookie("qf_status") || localStorage.getItem("qf_status") || "";\n		if (statusCookie) return statusCookie === "qualified";\n		return isQualifiedFallbackFromStorage();\n	}\n\n	// Crea un ID legible si Calendly no trae UUID (m\xE1x 128 chars)\n	function fallbackEventId() {\n		return (\n			"cal_" +\n			Date.now().toString(36) +\n			"_" +\n			Math.random().toString(36).slice(2, 10)\n		);\n	}\n\n	// Sanitiza a caracteres v\xE1lidos para Meta (recomendado)\n	function sanitizeId(id) {\n		return String(id)\n			.replace(/[^a-zA-Z0-9_\\\\-:.]/g, "")\n			.slice(0, 128);\n	}\n\n	async function sendMetaSchedule(payload) {\n		try {\n			await fetch("/api/meta-capi", {\n				method: "POST",\n				headers: { "Content-Type": "application/json" },\n				body: JSON.stringify(payload),\n				keepalive: true,\n			});\n		} catch (e) {\n			console.error("Error enviando a Meta CAPI:", e);\n		}\n	}\n\n	console.log("Califica?", isQualified());\n\n	window.addEventListener("message", async function (e) {\n		if (e.origin !== "https://calendly.com") return;\n		if (!e?.data || typeof e.data !== "object") return;\n\n		const evt = e.data.event || "";\n		if (typeof evt !== "string" || !evt.startsWith("calendly.")) return;\n\n		if (evt === "calendly.event_scheduled") {\n			// Extraer UUIDs de Calendly\n			const eventUri = e.data?.payload?.event?.uri || "";\n			const inviteeUri = e.data?.payload?.invitee?.uri || "";\n			const fromEvent = eventUri.split("/").pop() || "";\n			const fromInvitee = inviteeUri.split("/").pop() || "";\n			const rawId = fromInvitee || fromEvent || fallbackEventId();\n			const eventId = sanitizeId(rawId);\n\n			// Datos complementarios\n			const email = localStorage.getItem("lead_email") || "";\n			const phone = localStorage.getItem("lead_phone") || "";\n			const fbp = getCookie("_fbp") || localStorage.getItem("fbp") || "";\n			const fbc = getCookie("_fbc") || localStorage.getItem("fbc") || "";\n\n			// \u{1F447} Enviar SOLO si est\xE1 calificado\n			if (isQualified()) {\n				await sendMetaSchedule({\n					eventName: "Schedule",\n					eventTime: Math.floor(Date.now() / 1000),\n					eventSourceUrl: window.location.href,\n					actionSource: "website",\n					eventId,\n					email,\n					phone,\n					fbp,\n					fbc,\n				});\n			}\n\n			// Redirigir siempre al thankyou (califique o no)\n			window.location.assign("/thankyou");\n		}\n	});\n<\/script>'])), maybeRenderHead());
}, "/media/tomas/DATOS/callfunnels/ivan-vastushastra/src/components/Calendly.astro", void 0);

const $$Calendar = createComponent(($$result, $$props, $$slots) => {
  return renderTemplate`${renderComponent($$result, "Layout", $$Layout, {}, { "default": ($$result2) => renderTemplate` ${renderComponent($$result2, "Calendly", $$Calendly, {})} ` })}`;
}, "/media/tomas/DATOS/callfunnels/ivan-vastushastra/src/pages/calendar.astro", void 0);

const $$file = "/media/tomas/DATOS/callfunnels/ivan-vastushastra/src/pages/calendar.astro";
const $$url = "/calendar";

const _page = /*#__PURE__*/Object.freeze(/*#__PURE__*/Object.defineProperty({
	__proto__: null,
	default: $$Calendar,
	file: $$file,
	url: $$url
}, Symbol.toStringTag, { value: 'Module' }));

const page = () => _page;

export { page };
